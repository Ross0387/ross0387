<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Required meta tags -->
    <meta charset="utf-8" />

    <title>
        Test Moneris
    </title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
    <div id="outerDiv" style="width:400px; height:300px">
        <div id="monerisCheckout"></div>
    </div>
    <input type="Button" id="monerisButton" value="Test">
</body>

<script src="https://gatewayt.moneris.com/chkt/js/chkt_v1.00.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
<script>
    //Checkout ALIAS: MonerisTest2323 ID: chktCDCXRtore3
    let preloadString = '{ "store_id":"monca06840", "api_token":"aiDKR2wLcv9ny1aZkVA3",  "checkout_id":"chkt98UQJ06840", "txn_total":"5.00", "environment":"qa", "action":"preload"}'
    //const preloadJson = JSON.parse(preloadString);
    const button = document.getElementById("monerisButton");
    button.addEventListener('click', showCheckout);
    
    function showCheckout() {

        var myCheckout = new monerisCheckout();

        myCheckout.setMode("qa");
        myCheckout.setCheckoutDiv("monerisCheckout");
        myCheckout.setCallback("page_loaded", myPageLoad);
        myCheckout.setCallback("cancel_transaction", myCancelTransaction);
        myCheckout.setCallback("error_event", myErrorEvent);
        myCheckout.setCallback("payment_receipt", myPaymentReceipt);
        myCheckout.setCallback("payment_complete", myPaymentComplete);

        let xhr = new XMLHttpRequest();

        xhr.open("POST", "https://gatewayt.moneris.com/chkt/request/request.php", true);
        xhr.send(preloadString);

        console.log(xhr.responseText);
        console.log("Hello");
    }
    function ajaxPost() {

    }
    function myPageLoad() {

    }
    function myCancelTransaction() {

    }
    function myErrorEvent() {

    }
    function myPaymentReceipt() {

    }
    function myPaymentComplete() {

    }
</script>

</html>